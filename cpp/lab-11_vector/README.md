# Лабораторная №11

## Содержание
1. [Содержание](#содержание)
1. [Задание](#задание)
1. [Требования к корректности решения](#требования-к-корректности-решения)
    1. [Стандартные требования](#стандартные-требования)
    1. [Детали реализации `my_vector`](#детали-реализации-my_vector)
    1. [Класс `Product`](#класс-product)
    1. [Консольное приложение](#консольное-приложение)
    1. [Структура репозитория](#структура-репозитория)
1. [Дополнительные возможности](#допонительные-возможности)
1. [Сроки сдачи](#сроки-сдачи)
1. [Система оценки](#система-оценки)

## Задание
Реализовать шаблонный класс `my_vector`.
Можно считать, что для шаблонного типового параметра `T` выполняются следующие требования:

* [CopyConstructible][cppref-copy-constructible],
* [Destructible][cppref-destructible].

Обратите внимание, что `T` может быть не [DefaultConstructible][cppref-default-constructible], из-за
чего нельзя писать `new T[]` и другие конструкции в общем случае.

Также требуется:

* Перегрузить `operator<<` для вывода в `ostream` всех элементов `my_vector`.
* Реализовать класс `Product`, демонстрирующий минимальные требования к элементу `my_vector`,
  а также перегружающий `operator<<` для вывода.
* Реализовать шаблонные автоматические тесты `my_vector` и запустить их для `int` и `Product`.

## Требования к корректности решения
### Стандартные требования
Смотри стандартные требования из предыдущих заданий.
Демонстрационная программа должна собираться в `lab-11_vector`.

Новое требование: всё, кроме `main`, должно лежать в каком-нибудь пространстве имён. Сам класс
`vector` должен быть в пространстве имён `containers`.

### Детали реализации `my_vector`
Интерфейс класса определен в `my_vector.hpp`.
В нём необходимо расставить `&`, `const`, `explicit` там, где нужно.
Также может потребоваться разделить один метод на несколько перегрузок.

Реализация всех методов и функций должна располагаться в `my_vector_impl.hpp`.

Все операции:

* Работают по аналогии с `std::vector`, если в задании не сказано иное,
* Выполняют как можно меньше операций с элементами:
  * Не создают лишние элементы (в том числе лишние копии).

Следующие операции над `my_vector` разрешаются всегда:

* Конструктор по умолчанию.
* Конструктор копирования.
* Оператор копирующего присваивания.
* Деструктор.
* `size`.
* `capacity`.
* `empty`.
* `reserve`.
* `operator[]`.
* `push_back`.
* `pop_back`.
* `clear`.

Если тип `T` является [DefaultConstructible][cppref-default-constructible], то также разрешаются
следующие операции (в противном случае их использование влечёт ошибку компиляции в момент
инстанцирования соответствующего метода):

* Конструктор от `size_t n` создаёт `my_vector` из `n` элементов, проинициализированных
  конструктором `T` по умолчанию.
* `resize`.

При этом:

* `push_back` увеличивает размер масива в два раза, когда место закончилось.
* Методы и конструкторы, которые увеличивают `capacity`,
  делают его равным минимальной достаточной степени двойки.

Формат `operator<<` для `my_vector`: `<vec[0]> vec[1]> ... <vec[size-1]>` (все элементы `my_vector`
через `operator<<`, разделены ровно одним пробелом, завершающего перевода строки нет).

### Класс `Product`
Интерфейс класса `Product` задан в `main.cpp`, его необходимо доработать, чтобы он соответствовал
*минимальным* требованиям `my_vector`.

Формат `operator<<` для `Product`: `<name> <quantity> <price>` (поля разделены ровно одним пробелом,
завершающего перевода строки нет).

### Консольное приложение
В `main.cpp` должна быть реализована шаблонная функция `test_my_vector`, которая автоматически
тестирует (см. стандартные требования) все методы класса `my_vector` для заданного типа. Эта функция
вызывается в `main` для `int` и нового типа `Product`.

Также должна быть реализована шаблонная функция `test_my_vector_default_constructible`, которая
тестирует методы класса `my_vector`, включающиеся только для `DefaultConstructible` типов. Она
вызывается в `main` для `int`.

### Структура репозитория
```
<корень-личного-репозитория>
|--lab-11_vector
   |--include
   |  |-- my_vector.hpp
   |  |-- my_vector_impl.hpp
   |--src
   |  |-- main.cpp
   |--Makefile
```

Папку `obj`, объектные и исполняемые файлы класть в репозиторий не разрешается.

## Дополнительные возможности

В этом задании при проверке есть поддержка дополнительных возможностей.
Если не понимаете формулировку этого пункта — считайте что его нет.

Первой из них является поддержка семантики перемещений (их ещё не было на лекциях). Тем не менее,
если вы такое поддержали, заявите об этой поддержки с помощью
```cpp
#define LAB_VECTOR_MOVE_AWARE 1
```
в `my_vector.hpp`. От вас ожидается поддержка перемещающих конструкторов, присваивания и
`push_back`.

Второй является поддержка исключений. Если вы их поддерживаете, заявите через
```cpp
#define LAB_VECTOR_EXCEPTIONS 1
```
если вы поддерживаете _базовую_ гарантию или
```cpp
#define LAB_VECTOR_EXCEPTIONS 2
```
если вы поддерживаете _сильную_ гарантию.

Учтите, что комбинации дополнительных возможностей сильно усложняют реализацию.
**Крайне рекомендуется** сначала сдать лабу **без дополнительных возможностей**.
Дополнительных баллов за них не полагается.

## Сроки сдачи

Уточняйте у своего преподавателя.

## Система оценки
* Задание оценивается в 10 баллов: 7 за корректность и 3 за стиль.
* Точные критерии оценки каждой из частей остаются на усмотрение преподавателя.

[cppref-default-constructible]: https://en.cppreference.com/w/cpp/named_req/DefaultConstructible
[cppref-copy-constructible]: https://en.cppreference.com/w/cpp/named_req/CopyConstructible
[cppref-destructible]: https://en.cppreference.com/w/cpp/named_req/Destructible
